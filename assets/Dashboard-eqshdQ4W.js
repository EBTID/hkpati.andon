import{i as v,u as n,w as z}from"./xlsx-CWhwR8kk.js";import{_ as F,V as j,a as B}from"./VMenu-B-BUlR1w.js";import{V as L,b as y,a as C}from"./VSheet-C97c62Ri.js";import{F as N,i as U,G as E,T as G,S as H}from"./VTextField-CrbyiZd-.js";import{r as d,f as R,w as X,o as q,a4 as J,a5 as K,a6 as r,c as s,y as Q,an as W,a8 as D,ac as Y}from"./index-Bkqyg1YU.js";import"./VOverlay-BwOvpMLK.js";const Z={__name:"Dashboard",props:{modelValue:{type:String,default:""},label:{type:String,default:"Select Date"}},emits:["update:modelValue"],setup(_,{emit:O}){const V=d(null),k=d(null),M=d(null),A=d(null),x=_,S=O,b=d(!1),f=d(x.modelValue||new Date().toISOString().split("T")[0]),T=R(()=>f.value?new Date(f.value).toLocaleDateString():""),P=t=>{S("update:modelValue",t),b.value=!1,f.value=t};X(()=>x.modelValue,t=>{f.value=t||new Date().toISOString().split("T")[0]});const u=d({title:"Machine A1",operationTime:[{value:8,name:"On"},{value:6,name:"Idle"},{value:10,name:"Offline"}],temperature:Array.from({length:18},()=>(Math.random()*70+30).toFixed(2)),vibration:Array.from({length:18},()=>(Math.random()*10).toFixed(2)),pressure:Array.from({length:18},()=>(Math.random()*100).toFixed(2))}),c=d({show:!0,position:"top",distance:10,align:"center",verticalAlign:"middle",rotate:0,formatter:"{c}",fontSize:14,rich:{name:{}}});q(()=>{const t=v(V.value),a=g(),m={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Cycle Time","Temperature (°C)","Pressure (kPa)","Vibration (mm/s)","Operation Time"]},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack"]},restore:{show:!0},saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",axisTick:{show:!1},data:a.times}],yAxis:[{type:"value",min:0,max:150}],series:[{name:"Cycle Time",type:"bar",barGap:0,label:c.value,emphasis:{focus:"series"},data:a.durations},{name:"Temperature (°C)",type:"bar",label:c.value,emphasis:{focus:"series"},data:u.value.temperature},{name:"Pressure (kPa)",type:"bar",label:c.value,emphasis:{focus:"series"},data:u.value.pressure},{name:"Vibration (mm/s)",type:"bar",label:c.value,emphasis:{focus:"series"},data:u.value.vibration},{name:"Operation Time",type:"pie",radius:"30%",center:["80%","20%"],data:[{value:8,name:"On",itemStyle:{color:"#34eb34"}},{value:6,name:"Idle",itemStyle:{color:"#8c8989"}},{value:10,name:"Offline",itemStyle:{color:"#ed5353"}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:"{b}: {c} hours",position:"outside"}}]};t.setOption(m);const l=v(k.value),p=Array.from({length:18},(ee,w)=>`${Math.floor(w/2)}:${w%2===0?"00":"30"}`),h={title:{text:"Temperature"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:p},yAxis:{type:"value"},series:[{name:"Temperature (°C)",type:"line",label:c.value,data:u.value.temperature}]};l.setOption(h);const i=v(M.value),o={title:{text:"Pressure"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:p},yAxis:{type:"value"},series:[{name:"Pressure (kPa)",type:"line",label:c.value,data:u.value.pressure}]};i.setOption(o);const e=v(A.value),I={title:{text:"Vibration"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:p},yAxis:{type:"value"},series:[{name:"Vibration (mm/s)",type:"line",label:c.value,data:u.value.vibration}]};e.setOption(I),window.addEventListener("resize",()=>{t.resize(),l.resize(),i.resize(),e.resize()})});const g=()=>{const t=[],a=[];let l=480;for(let p=0;p<10;p++){const h=15+Math.floor(Math.random()*6),i=Math.floor(l/60),o=l%60,e=`${i}:${o<10?"0":""}${o}`;if(l+=h,l>=480+9*60)break;t.push(e),a.push(h)}return{times:t,durations:a}},$=()=>{const t=g(),a=t.times.map((o,e)=>({Time:o,Duration:t.durations[e]})),m=u.value.temperature.map((o,e)=>({Time:`${Math.floor(e/2)}:${e%2===0?"00":"30"}`,Temperature:o})),l=u.value.pressure.map((o,e)=>({Time:`${Math.floor(e/2)}:${e%2===0?"00":"30"}`,Pressure:o})),p=u.value.vibration.map((o,e)=>({Time:`${Math.floor(e/2)}:${e%2===0?"00":"30"}`,Vibration:o})),h=u.value.operationTime.map((o,e)=>({Time:`${Math.floor(e/2)}:${e%2===0?"00":"30"}`,OperationTime:o})),i=n.book_new();n.book_append_sheet(i,n.json_to_sheet(a),"Cycle Time"),n.book_append_sheet(i,n.json_to_sheet(m),"Temperature Data"),n.book_append_sheet(i,n.json_to_sheet(l),"Pressure Data"),n.book_append_sheet(i,n.json_to_sheet(p),"Vibration Data"),n.book_append_sheet(i,n.json_to_sheet(h),"Operation Time Data"),z(i,"MachineData.xlsx")};return(t,a)=>(J(),K(L,null,{default:r(()=>[s(C,null,{default:r(()=>[s(y,{cols:"12",md:"3"},{default:r(()=>[s(j,{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=m=>b.value=m),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:r(({on:m,attrs:l})=>[s(N,Q({modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=p=>T.value=p),label:_.label,readonly:""},l,W(m),{variant:"outlined"}),null,16,["modelValue","label"])]),default:r(()=>[s(B,{modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=m=>f.value=m),onInput:P,format:"yyyy-MM-dd"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),s(y,{cols:"12",md:"6"},{default:r(()=>[s(U,{onClick:$,color:"green"},{default:r(()=>[D("Download")]),_:1})]),_:1})]),_:1}),s(C,null,{default:r(()=>[s(y,{cols:"12"},{default:r(()=>[s(E,null,{default:r(()=>[s(G,{class:"card-title"},{default:r(()=>[D("Production Cycle")]),_:1}),s(H,null,{default:r(()=>[Y("div",{ref_key:"productionChart",ref:V,style:{width:"100%",height:"500px"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ie=F(Z,[["__scopeId","data-v-4cbae057"]]);export{ie as default};
