import{i as y,u as p,w as G}from"./xlsx-CWhwR8kk.js";import{_ as Q,V as q,a as R}from"./VMenu-B-BUlR1w.js";import{V as X,b as h,a as M}from"./VSheet-C97c62Ri.js";import{F as Y,i as J,G as g,T as m,S as x}from"./VTextField-CrbyiZd-.js";import{r as c,f as K,w as W,o as Z,a4 as ee,a5 as te,a6 as e,c as t,y as ae,an as oe,a8 as d,ac as b,ad as V}from"./index-Bkqyg1YU.js";import"./VOverlay-BwOvpMLK.js";const re={__name:"Machine",props:{modelValue:{type:String,default:""},label:{type:String,default:"Select Date"}},emits:["update:modelValue"],setup(k,{emit:F}){const A=c(null),O=c(null),S=c(null),$=c(null),z=c(null),I=k,j=F,w=c(!1),v=c(I.modelValue||new Date().toISOString().split("T")[0]),P=K(()=>v.value?new Date(v.value).toLocaleDateString():""),E=a=>{j("update:modelValue",a),w.value=!1,v.value=a};W(()=>I.modelValue,a=>{v.value=a||new Date().toISOString().split("T")[0]});const i=c({title:"Machine A1",operationTime:Math.floor(Math.random()*9)+1,temperature:Array.from({length:18},()=>(Math.random()*70+30).toFixed(2)),vibration:Array.from({length:18},()=>(Math.random()*10).toFixed(2)),pressure:Array.from({length:18},()=>(Math.random()*100).toFixed(2))});c({show:!0,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:"{c}  {name|{a}}",fontSize:16,rich:{name:{}}}),Z(()=>{const a=y(A.value),o=B(),s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(D){const{name:T,value:U}=D[0];return`Time: ${T}<br>Quantity: ${U}<br>Duration: ${o.durations[D[0].dataIndex]} minutes`}},legend:{data:["Duration"]},toolbox:{show:!0,orient:"vertical",left:"right",top:"center",feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack"]},restore:{show:!0},saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:o.times,axisLabel:{interval:0,rotate:45,margin:10}},yAxis:{type:"value"},series:[{name:"Minutes",type:"bar",barGap:0,emphasis:{focus:"series"},data:o.durations,label:{show:!0,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:"{c}  {name|{a}}",fontSize:16,rich:{name:{}}}}]};a.setOption(s);const f=y(O.value),u={tooltip:{trigger:"item"},series:[{name:"Operation Time",type:"pie",radius:["40%","70%"],center:["50%","50%"],data:[{value:i.value.operationTime,name:"Operation Time"},{value:24-i.value.operationTime,name:"Idle Time"}],label:{formatter:"{b}: {d}%",position:"outside"},labelLine:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],graphic:[{type:"text",left:"center",top:"center",style:{text:`${i.value.operationTime} H`,textAlign:"center",fill:"#333",fontSize:62}}]};f.setOption(u);const n=y(S.value),r=Array.from({length:18},(D,T)=>`${Math.floor(T/2)}:${T%2===0?"00":"30"}`),l={title:{text:"Temperature"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{name:"Temperature",type:"line",data:i.value.temperature}]};n.setOption(l);const _=y($.value),C={title:{text:"Pressure"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{name:"Pressure",type:"line",data:i.value.pressure}]};_.setOption(C);const L=y(z.value),N={title:{text:"Vibration"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{name:"Vibration",type:"line",data:i.value.vibration}]};L.setOption(N),window.addEventListener("resize",()=>{a.resize(),f.resize(),n.resize(),_.resize(),L.resize()})});const B=()=>{const a=[],o=[],s=[];let u=480;for(let n=0;n<10;n++){const r=15+Math.floor(Math.random()*5),l=Math.floor(u/60),_=u%60,C=`${l}:${_<10?"0":""}${_}`;if(u+=r,u>=480+9*60)break;a.push(C),o.push(50),s.push(r)}return{times:a,quantities:o,durations:s}},H=()=>{const a=B(),o=a.times.map((r,l)=>({Time:r,Quantity:50,Duration:a.durations[l]})),s=i.value.temperature.map((r,l)=>({Time:`${Math.floor(l/2)}:${l%2===0?"00":"30"}`,Temperature:r})),f=i.value.pressure.map((r,l)=>({Time:`${Math.floor(l/2)}:${l%2===0?"00":"30"}`,Pressure:r})),u=i.value.vibration.map((r,l)=>({Time:`${Math.floor(l/2)}:${l%2===0?"00":"30"}`,Vibration:r})),n=p.book_new();p.book_append_sheet(n,p.json_to_sheet(o),"Cycle Time"),p.book_append_sheet(n,p.json_to_sheet(s),"Temperature Data"),p.book_append_sheet(n,p.json_to_sheet(f),"Pressure Data"),p.book_append_sheet(n,p.json_to_sheet(u),"Vibration Data"),G(n,"MachineData.xlsx")};return(a,o)=>(ee(),te(X,null,{default:e(()=>[t(M,null,{default:e(()=>[t(h,{cols:"12",md:"3"},{default:e(()=>[t(q,{modelValue:w.value,"onUpdate:modelValue":o[2]||(o[2]=s=>w.value=s),"close-on-content-click":!1,transition:"scale-transition","offset-y":""},{activator:e(({on:s,attrs:f})=>[t(Y,ae({modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=u=>P.value=u),label:k.label,readonly:""},f,oe(s),{variant:"outlined"}),null,16,["modelValue","label"])]),default:e(()=>[t(R,{modelValue:v.value,"onUpdate:modelValue":o[1]||(o[1]=s=>v.value=s),onInput:E,format:"yyyy-MM-dd"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(h,{cols:"12",md:"6"},{default:e(()=>[t(J,{onClick:H,color:"green"},{default:e(()=>[d("Download")]),_:1})]),_:1})]),_:1}),t(M,null,{default:e(()=>[t(h,{cols:"12"},{default:e(()=>[t(g,null,{default:e(()=>[t(m,{class:"card-title"},{default:e(()=>[d("CYCLE TIME")]),_:1}),t(x,null,{default:e(()=>[b("div",{ref_key:"productionChart",ref:A,style:{width:"100%",height:"400px"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1}),t(M,null,{default:e(()=>[t(h,{cols:"12",md:"6"},{default:e(()=>[t(g,null,{default:e(()=>[t(m,{class:"card-title"},{default:e(()=>[d(V(i.value.title),1)]),_:1}),t(m,{class:"card-title"},{default:e(()=>[d("Operation Time")]),_:1}),t(x,null,{default:e(()=>[b("div",{ref_key:"operationTimeChart",ref:O,style:{width:"100%",height:"400px"}},null,512)]),_:1})]),_:1})]),_:1}),t(h,{cols:"12",md:"6"},{default:e(()=>[t(g,null,{default:e(()=>[t(m,{class:"card-title"},{default:e(()=>[d(V(i.value.title),1)]),_:1}),t(m,{class:"card-title"},{default:e(()=>[d("Temperature")]),_:1}),t(x,null,{default:e(()=>[b("div",{ref_key:"temperatureChart",ref:S,style:{width:"100%",height:"400px"}},null,512)]),_:1})]),_:1})]),_:1}),t(h,{cols:"12",md:"6"},{default:e(()=>[t(g,null,{default:e(()=>[t(m,{class:"card-title"},{default:e(()=>[d(V(i.value.title),1)]),_:1}),t(m,{class:"card-title"},{default:e(()=>[d("Pressure")]),_:1}),t(x,null,{default:e(()=>[b("div",{ref_key:"pressureChart",ref:$,style:{width:"100%",height:"400px"}},null,512)]),_:1})]),_:1})]),_:1}),t(h,{cols:"12",md:"6"},{default:e(()=>[t(g,null,{default:e(()=>[t(m,{class:"card-title"},{default:e(()=>[d(V(i.value.title),1)]),_:1}),t(m,{class:"card-title"},{default:e(()=>[d("Vibration")]),_:1}),t(x,null,{default:e(()=>[b("div",{ref_key:"vibrationChart",ref:z,style:{width:"100%",height:"400px"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},pe=Q(re,[["__scopeId","data-v-54ac18c7"]]);export{pe as default};
